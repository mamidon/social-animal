@model PagedResult<EventListItem>

<div class="table-container">
    <table class="data-table">
        <thead>
            <tr>
                <th class="checkbox-column">
                    <input type="checkbox" id="select-all">
                </th>
                <th class="sortable" 
                    hx-get="/admin/events/list-partial?sortBy=Title"
                    hx-target="#event-list"
                    hx-include="#filters">
                    Title
                    <i class="sort-icon"></i>
                </th>
                <th class="sortable"
                    hx-get="/admin/events/list-partial?sortBy=City"
                    hx-target="#event-list"
                    hx-include="#filters">
                    Location
                    <i class="sort-icon"></i>
                </th>
                <th>Address</th>
                <th>Invitations</th>
                <th>Attendees</th>
                <th class="sortable"
                    hx-get="/admin/events/list-partial?sortBy=CreatedOn"
                    hx-target="#event-list"
                    hx-include="#filters">
                    Created
                    <i class="sort-icon"></i>
                </th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @if(Model.Data.Any())
            {
                @foreach(var eventItem in Model.Data)
                {
                    <tr class="@(eventItem.IsDeleted ? "deleted-row" : "")"
                        data-id="@eventItem.Id">
                        <td>
                            <input type="checkbox" 
                                   class="row-select" 
                                   value="@eventItem.Id">
                        </td>
                        <td>
                            <a href="/admin/events/@eventItem.Slug"
                               hx-boost="true">
                                @eventItem.Title
                            </a>
                        </td>
                        <td>@eventItem.Location</td>
                        <td>
                            <span title="@eventItem.FullAddress">
                                @if(eventItem.FullAddress.Length > 50)
                                {
                                    <span>@(eventItem.FullAddress.Substring(0, 47))...</span>
                                }
                                else
                                {
                                    <span>@eventItem.FullAddress</span>
                                }
                            </span>
                        </td>
                        <td>
                            <span class="badge">@eventItem.InvitationCount</span>
                        </td>
                        <td>
                            <span class="badge badge-success">@eventItem.AttendeeCount</span>
                        </td>
                        <td>
                            <time datetime="@eventItem.CreatedOn">
                                @eventItem.CreatedOn.ToString("MMM dd, yyyy")
                            </time>
                        </td>
                        <td>
                            @if(eventItem.IsDeleted)
                            {
                                <span class="status-badge deleted">Deleted</span>
                            }
                            else
                            {
                                <span class="status-badge active">Active</span>
                            }
                        </td>
                        <td class="actions">
                            <div class="action-menu">
                                <a href="/admin/events/@eventItem.Slug"
                                   class="btn-icon"
                                   title="View Details">
                                    <i class="fas fa-eye"></i>
                                </a>
                                <a href="/admin/events/@eventItem.Slug/edit"
                                   class="btn-icon"
                                   title="Edit">
                                    <i class="fas fa-edit"></i>
                                </a>
                                @if(eventItem.IsDeleted)
                                {
                                    <button class="btn-icon"
                                            hx-post="/admin/events/@eventItem.Id/restore"
                                            hx-confirm="Restore this event?"
                                            title="Restore">
                                        <i class="fas fa-undo"></i>
                                    </button>
                                }
                                else
                                {
                                    <button class="btn-icon"
                                            hx-delete="/admin/events/@eventItem.Id"
                                            hx-confirm="Delete this event?"
                                            title="Delete">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                }
                            </div>
                        </td>
                    </tr>
                }
            }
            else
            {
                <tr>
                    <td colspan="9" class="text-center text-muted">
                        <div class="empty-state">
                            <i class="fas fa-calendar fa-3x mb-3"></i>
                            <h4>No events found</h4>
                            <p>No events match your current search criteria.</p>
                            <a href="/admin/events/create" class="btn btn-primary">
                                Create First Event
                            </a>
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>
    
    <!-- Pagination -->
    @if(Model.TotalPages > 1)
    {
        @await Html.PartialAsync("_Pagination", Model)
    }
</div>