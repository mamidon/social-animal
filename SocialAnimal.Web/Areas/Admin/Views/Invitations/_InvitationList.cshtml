@model PagedResult<InvitationListItem>

<div class="table-container">
    <table class="data-table">
        <thead>
            <tr>
                <th class="checkbox-column">
                    <input type="checkbox" id="select-all">
                </th>
                <th class="sortable" 
                    hx-get="/admin/invitations/list-partial?sortBy=GuestName"
                    hx-target="#invitation-list"
                    hx-include="#filters">
                    Guest Name
                    <i class="sort-icon"></i>
                </th>
                <th>Contact</th>
                <th class="sortable"
                    hx-get="/admin/invitations/list-partial?sortBy=EventId"
                    hx-target="#invitation-list"
                    hx-include="#filters">
                    Event
                    <i class="sort-icon"></i>
                </th>
                <th>Party Size</th>
                <th>Status</th>
                <th>Response</th>
                <th class="sortable"
                    hx-get="/admin/invitations/list-partial?sortBy=CreatedOn"
                    hx-target="#invitation-list"
                    hx-include="#filters">
                    Created
                    <i class="sort-icon"></i>
                </th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @if(Model.Data.Any())
            {
                @foreach(var invitation in Model.Data)
                {
                    <tr class="@(invitation.IsDeleted ? "deleted-row" : "")"
                        data-id="@invitation.Id">
                        <td>
                            <input type="checkbox" 
                                   class="row-select" 
                                   value="@invitation.Id">
                        </td>
                        <td>
                            <a href="/admin/invitations/@invitation.Slug"
                               hx-boost="true">
                                @invitation.GuestName
                            </a>
                        </td>
                        <td class="text-muted">
                            @if(!string.IsNullOrEmpty(invitation.Email))
                            {
                                <a href="mailto:@invitation.Email">@invitation.Email</a>
                            }
                            else if(!string.IsNullOrEmpty(invitation.Phone))
                            {
                                <a href="tel:@invitation.Phone">@invitation.Phone</a>
                            }
                            else
                            {
                                <span class="text-muted">No contact</span>
                            }
                        </td>
                        <td>
                            <a href="/admin/events/@invitation.EventId">
                                @invitation.EventTitle
                            </a>
                        </td>
                        <td>
                            <span class="badge">@invitation.MaxPartySize max</span>
                        </td>
                        <td>
                            @if(invitation.IsDeleted)
                            {
                                <span class="status-badge deleted">Deleted</span>
                            }
                            else if(invitation.IsSent)
                            {
                                <span class="status-badge sent">Sent</span>
                            }
                            else
                            {
                                <span class="status-badge pending">Pending</span>
                            }
                        </td>
                        <td>
                            @if(invitation.HasResponse)
                            {
                                <span class="response-badge @invitation.ResponseStatus?.ToLower()">
                                    @invitation.ResponseStatus
                                </span>
                            }
                            else
                            {
                                <span class="text-muted">No response</span>
                            }
                        </td>
                        <td>
                            <time datetime="@invitation.CreatedOn">
                                @invitation.CreatedOn.ToString("MMM dd, yyyy")
                            </time>
                        </td>
                        <td class="actions">
                            <div class="action-menu">
                                <a href="/admin/invitations/@invitation.Slug"
                                   class="btn-icon"
                                   title="View Details">
                                    <i class="fas fa-eye"></i>
                                </a>
                                @if(!invitation.IsSent)
                                {
                                    <button class="btn-icon"
                                            hx-post="/admin/invitations/@invitation.Id/send"
                                            hx-confirm="Send this invitation?"
                                            title="Send Invitation">
                                        <i class="fas fa-envelope"></i>
                                    </button>
                                }
                                else
                                {
                                    <button class="btn-icon"
                                            hx-post="/admin/invitations/@invitation.Id/resend"
                                            hx-confirm="Resend this invitation?"
                                            title="Resend Invitation">
                                        <i class="fas fa-redo"></i>
                                    </button>
                                }
                                <a href="/admin/invitations/@invitation.Slug/edit"
                                   class="btn-icon"
                                   title="Edit">
                                    <i class="fas fa-edit"></i>
                                </a>
                                <button class="btn-icon"
                                        hx-delete="/admin/invitations/@invitation.Id"
                                        hx-confirm="Delete this invitation?"
                                        title="Delete">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                }
            }
            else
            {
                <tr>
                    <td colspan="9" class="text-center text-muted">
                        <div class="empty-state">
                            <i class="fas fa-envelope fa-3x mb-3"></i>
                            <h4>No invitations found</h4>
                            <p>No invitations match your current search criteria.</p>
                            <a href="/admin/invitations/create" class="btn btn-primary">
                                Create First Invitation
                            </a>
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>
    
    <!-- Pagination -->
    @if(Model.TotalPages > 1)
    {
        @await Html.PartialAsync("_Pagination", Model)
    }
</div>