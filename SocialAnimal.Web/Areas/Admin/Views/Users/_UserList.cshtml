@model PagedResult<UserListItem>

<div class="table-container">
    <table class="data-table">
        <thead>
            <tr>
                <th class="checkbox-column">
                    <input type="checkbox" id="select-all">
                </th>
                <th class="sortable" 
                    hx-get="/admin/users/list-partial?sortBy=FirstName"
                    hx-target="#user-list"
                    hx-include="#filters">
                    First Name
                    <i class="sort-icon"></i>
                </th>
                <th class="sortable"
                    hx-get="/admin/users/list-partial?sortBy=LastName"
                    hx-target="#user-list"
                    hx-include="#filters">
                    Last Name
                    <i class="sort-icon"></i>
                </th>
                <th class="sortable"
                    hx-get="/admin/users/list-partial?sortBy=Phone"
                    hx-target="#user-list"
                    hx-include="#filters">
                    Phone
                    <i class="sort-icon"></i>
                </th>
                <th>Reservations</th>
                <th class="sortable"
                    hx-get="/admin/users/list-partial?sortBy=CreatedOn"
                    hx-target="#user-list"
                    hx-include="#filters">
                    Created
                    <i class="sort-icon"></i>
                </th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @if(Model.Data.Any())
            {
                @foreach(var user in Model.Data)
                {
                    <tr class="@(user.IsDeleted ? "deleted-row" : "")"
                        data-id="@user.Id">
                        <td>
                            <input type="checkbox" 
                                   class="row-select" 
                                   value="@user.Id">
                        </td>
                        <td>
                            <a href="/admin/users/@user.Slug"
                               hx-boost="true">
                                @user.FirstName
                            </a>
                        </td>
                        <td>@user.LastName</td>
                        <td>
                            <a href="tel:@user.Phone">@user.Phone</a>
                        </td>
                        <td>
                            <span class="badge">@user.ReservationCount</span>
                        </td>
                        <td>
                            <time datetime="@user.CreatedOn">
                                @user.CreatedOn.ToString("MMM dd, yyyy")
                            </time>
                        </td>
                        <td>
                            @if(user.IsDeleted)
                            {
                                <span class="status-badge deleted">Deleted</span>
                            }
                            else
                            {
                                <span class="status-badge active">Active</span>
                            }
                        </td>
                        <td class="actions">
                            <div class="action-menu">
                                <a href="/admin/users/@user.Slug"
                                   class="btn-icon"
                                   title="View Details">
                                    <i class="fas fa-eye"></i>
                                </a>
                                <a href="/admin/users/@user.Slug/edit"
                                   class="btn-icon"
                                   title="Edit">
                                    <i class="fas fa-edit"></i>
                                </a>
                                @if(user.IsDeleted)
                                {
                                    <button class="btn-icon"
                                            hx-post="/admin/users/@user.Id/restore"
                                            hx-confirm="Restore this user?"
                                            title="Restore">
                                        <i class="fas fa-undo"></i>
                                    </button>
                                }
                                else
                                {
                                    <button class="btn-icon"
                                            hx-delete="/admin/users/@user.Id"
                                            hx-confirm="Delete this user?"
                                            title="Delete">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                }
                            </div>
                        </td>
                    </tr>
                }
            }
            else
            {
                <tr>
                    <td colspan="8" class="text-center text-muted">
                        <div class="empty-state">
                            <i class="fas fa-users fa-3x mb-3"></i>
                            <h4>No users found</h4>
                            <p>No users match your current search criteria.</p>
                            <a href="/admin/users/create" class="btn btn-primary">
                                Create First User
                            </a>
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>
    
    <!-- Pagination -->
    @if(Model.TotalPages > 1)
    {
        @await Html.PartialAsync("_Pagination", Model)
    }
</div>